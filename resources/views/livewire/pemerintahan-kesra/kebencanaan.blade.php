<?php

?>
<div>

    <div class="slim-mainpanel">
        <div class="container-fluid pd-t-20">
            <div class="row row-xs mg-b-20">
                <div class="col-12">
                    <div class="ht-md-60 pd-x-20 bg-primary d-flex align-items-center justify-content-center">
                        @livewire('pemerintahan-kesra.navigation')
                    </div>

                    <div class="card-body bd bd-t-0">
                        <div class="tab-content">
                            <div class="tab-pane active" id="kebencanaan">
                                <div class="row row-xs mg-b-20">
                                    <div class="col-12 col-md-4">
                                        <div class="card bg-warning">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Jenis Bencana</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark">Jenis</p>
                                                    </div>
                                                    <div class="right">
                                                        <i class="fa fa-plus-circle tx-white"
                                                            style="font-size: 80px;"></i>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                    <div class="col-12 col-md-4">
                                        <div class="card bg-warning">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Penyebab Bencana</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark">Penyebab</p>
                                                    </div>
                                                    <div class="right">
                                                        <i class="fa fa-exclamation-triangle tx-white"
                                                            style="font-size: 80px;"></i>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                    <div class="col-12 col-md-4">
                                        <div class="card bg-warning">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Total Pengaduan</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark">Pengaduan</p>
                                                    </div>
                                                    <div class="right">
                                                        <i class="fa fa-bullhorn tx-white" style="font-size: 80px;"></i>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                </div>
                                <div class="row row-xs mg-b-20">
                                    <div class="col-12 col-md-3">
                                        <div class="card bg-body-custom-ungu">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Kebakaran</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark"><span class="tx-dark">Laporan</span>
                                                            Kabakaran</p>
                                                    </div>
                                                    <div class="right">
                                                        <script
                                                            src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
                                                            type="module"></script>

                                                        <dotlottie-player
                                                            src="https://lottie.host/2cd01a14-7374-4d83-8554-f4db39a51779/vVE5YcGU1K.json"
                                                            background="transparent" speed="1"
                                                            style="width: 100px; height: 80px;" loop autoplay>
                                                        </dotlottie-player>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                    <div class="col-12 col-md-3">
                                        <div class="card bg-body-custom-ungu">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Banjir</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark"><span class="tx-dark">Laporan</span>
                                                            Bajir</p>
                                                    </div>
                                                    <div class="right">
                                                        <script
                                                            src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
                                                            type="module"></script>

                                                        <dotlottie-player
                                                            src="https://lottie.host/d0eba597-7f7a-44de-bee3-13cde3ee03fe/RyJTPwzJdw.json"
                                                            background="transparent" speed="1"
                                                            style="width: 100px; height: 100px;" loop autoplay>
                                                        </dotlottie-player>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                    <div class="col-12 col-md-3">
                                        <div class="card bg-body-custom-ungu">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Angin Puting Beliung</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark"><span class="tx-dark">Laporan</span>
                                                            Angin Puting Beliung</p>
                                                    </div>
                                                    <div class="right">
                                                        <script
                                                            src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
                                                            type="module"></script>

                                                        <dotlottie-player
                                                            src="https://lottie.host/a57741a8-e2f9-468c-acd4-b0715ac68dd3/8cgX6HM2xs.json"
                                                            background="transparent" speed="1"
                                                            style="width: 100px; height: 100px;" loop autoplay>
                                                        </dotlottie-player>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                    <div class="col-12 col-md-3">
                                        <div class="card bg-body-custom-ungu">
                                            <div class="card-body pd-b-0">
                                                <div class="d-flex justify-content-between">
                                                    <div class="left">
                                                        <h6 class="slim-card-title tx-dark">Bencana Lainnya</h6>
                                                        <h2 class="tx-lato tx-dark">219</h2>
                                                        <p class="tx-12 tx-dark"><span class="tx-dark">Laporan</span>
                                                            Bencana</p>
                                                    </div>
                                                    <div class="right">
                                                        <script
                                                            src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
                                                            type="module"></script>

                                                        <dotlottie-player
                                                            src="https://lottie.host/0886f773-e31d-4d28-a969-dedc5a948521/F6SA0O1KYd.json"
                                                            background="transparent" speed="1"
                                                            style="width: 100px; height: 100px;" loop autoplay>
                                                        </dotlottie-player>
                                                    </div>
                                                </div>
                                            </div><!-- card-body -->
                                        </div><!-- card -->
                                    </div><!-- col-4 -->
                                </div>
                                <div id="tripId" class="row row-xs mg-b-20">
                                    <div id="map"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @push('styles')
    <style>
        #map {
            width: 100%;
            height: 80vh;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    @endpush

    @push('scripts')
    {{-- <script src="{{ asset('assets/js/dashboard-opd/kependudukan.js') }}"></script> --}}

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="{{ asset('assets/js/dashboard-opd/penduduk.js') }}"></script>
    <script src="{{ asset('assets/js/dashboard-opd/map.js') }}"></script>


    <script>
        var info = L.control();
    var kobar = {
      lat: -3.345196,
      lng: 104.670997
    };

    // Initialize the map
    var kobar_map = L.map('map', {
      center: kobar,
      zoom: 10,
      scrollWheelZoom: true,
      doubleClickZoom: false
    });

    // Set the tile layer
    var tilemap = [
      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',
      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',
      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
      'https://portal.ina-sdi.or.id/arcgis/rest/services/RBI/Basemap/MapServer/tile/{z}/{y}/{x}',
      'https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',
      'https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}',
      'https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',
      'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png',
      'https://a.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png'
    ];
    var baseon = 4;

    // Set the base map
    function setMap() {
      L.tileLayer(tilemap[baseon], {
        maxZoom: 20,
        attribution: '',
        subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
      }).addTo(kobar_map);

      // Add the polygon to the map
      var polygon = L.polygon([
        [-3.556695, 104.437781],
        [-3.562177, 104.414436],
        [-3.584107, 104.403449],
        [-3.621113, 104.319678],
        [-3.596443, 104.305946],
        [-3.496384, 104.299079],
        [-3.493643, 104.443275],
        [-3.422362, 104.450141],
        [-3.422362, 104.463874],
        [-3.403170, 104.466621],
        [-3.349705, 104.536658],
        [-3.318172, 104.540778],
        [-3.319543, 104.529792],
        [-3.300349, 104.525672],
        [-3.260589, 104.547645],
        [-3.256476, 104.560004],
        [-3.235910, 104.572364],
        [-3.215343, 104.562751],
        [-3.193405, 104.507819],
        [-3.145413, 104.489967],
        [-3.120731, 104.477607],
        [-3.085077, 104.507819],
        [-3.091934, 104.581977],
        [-3.101533, 104.606696],
        [-3.111132, 104.620429],
        [-3.050794, 104.691840],
        [-3.068714, 104.715512],
        [-3.097146, 104.719316],
        [-3.070577, 104.730719],
        [-3.063745, 104.743642],
        [-3.047804, 104.742882],
        [-3.037176, 104.751244],
        [-3.033380, 104.781653],
        [-3.050081, 104.781653],
        [-3.054636, 104.798377],
        [-3.073614, 104.793056],
        [-3.082723, 104.806739],
        [-3.116882, 104.799897],
        [-3.131887, 104.793535],
        [-3.130638, 104.812302],
        [-3.164367, 104.814804],
        [-3.183970, 104.799735],
        [-3.217816, 104.814566],
        [-3.265057, 104.807504],
        [-3.297491, 104.799735],
        [-3.308771, 104.812447],
        [-3.333448, 104.816685],
        [-3.348253, 104.806798],
        [-3.355304, 104.818097],
        [-3.454001, 104.813860],
        [-3.485018, 104.741118],
        [-3.464575, 104.707219],
        [-3.802178, 104.561736],
        [-3.783856, 104.499588],
        [-3.757782, 104.460746],
        [-3.773286, 104.464277],
        [-3.782447, 104.408485],
        [-3.762715, 104.376705],
        [-3.755668, 104.383061],
        [-3.734527, 104.372467],
        [-3.719022, 104.374586],
        [-3.671099, 104.450859],
        [-3.610486, 104.478402],
        [-3.563966, 104.438853],
      ]).addTo(kobar_map).bindPopup('Peta Wilayah Ogan Ilir');
    }
    setMap();

    // Define custom marker icons
    var blueIcon = new L.Icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
      shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    });

    // Add a marker with a popup
    var marker = L.marker([-3.2360136236357704, 104.66542011707496], {
      icon: blueIcon
    }).addTo(kobar_map);

    marker.bindPopup('<p>Location: <br> Latitude: -3.2360136236357704 <br> Longitude: 104.66542011707496</p>');
    $(document).on('show.tab', 'a[data-toggle="tab"]', function (e) {
      var target = $(e.target).attr('href');
      var petaIdl = target.split('_')[2];
      var tripId = target.split('_')[3];

      var map = window[mapId];
      if (map) {
        map.setView([-3.247523, 104.661723], 14.5);
        map.invalidateSize();
      } else {
        var mapElement = $(target).find('div[id^="map"]');
        if (mapElement.length) {
          mapElement = mapElement[0];
          map = window[mapElement.id];
          map.setView([-3.247523, 104.661723], 14.5);
          map.invalidateSize();
        }
      }
    })
    </script>

    <script>
        $(document).ready(function () {
      $('.select2-show-search').select2({
        placeholder: function () {
          $(this).data('placeholder');
        },
        allowClear: true
      });
    });
    </script>
    @endpush
</div>
